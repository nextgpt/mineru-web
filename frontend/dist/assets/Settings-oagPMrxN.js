import{a as _}from"./index-DHr9lByg.js";import{g as d}from"./user-DmwaAHDW.js";import{a as C,r as L,o as h,b as p,e as b,f as e,w as n,i as c,E as u,h as O,q as f,y as V,_ as S}from"./index-3p_sB7V1.js";const U={class:"settings-root"},w={class:"settings-card"},M={key:0,class:"settings-tip"},E=C({__name:"Settings",setup(I){const v={forceOcr:!1,ocrLanguage:"ch",formulaRecognition:!0,tableRecognition:!0,version:"",backend:"pipeline"},t=L({...v}),k=async()=>{var r,l,s;try{const a=await _.get("/api/settings",{headers:{"X-User-Id":d()}});t.value={forceOcr:a.data.force_ocr,ocrLanguage:a.data.ocr_lang,formulaRecognition:a.data.formula_recognition,tableRecognition:a.data.table_recognition,version:a.data.version||"",backend:a.data.backend||"pipeline"}}catch(a){console.error("加载设置失败:",((r=a.response)==null?void 0:r.data)||a.message),u.error(`加载设置失败: ${((s=(l=a.response)==null?void 0:l.data)==null?void 0:s.detail)||a.message}`)}},x=async()=>{var r,l,s;try{await _.put("/api/settings",{force_ocr:t.value.forceOcr,ocr_lang:t.value.ocrLanguage,formula_recognition:t.value.formulaRecognition,table_recognition:t.value.tableRecognition,version:t.value.version,backend:t.value.backend,user_id:d()},{headers:{"X-User-Id":d()}}),u.success("设置已保存")}catch(a){console.error("保存设置失败:",((r=a.response)==null?void 0:r.data)||a.message),u.error(`保存设置失败: ${((s=(l=a.response)==null?void 0:l.data)==null?void 0:s.detail)||a.message}`)}},R=()=>{t.value={...v},u.info("设置已重置")};return h(()=>{k()}),(r,l)=>{const s=c("el-switch"),a=c("el-form-item"),o=c("el-option"),g=c("el-select"),m=c("el-button"),y=c("el-form");return V(),p("div",U,[b("div",w,[l[7]||(l[7]=b("div",{class:"settings-header"},"系统设置",-1)),e(y,{model:t.value,"label-width":"120px",class:"settings-form"},{default:n(()=>[e(a,{label:"强制开启OCR"},{default:n(()=>[e(s,{modelValue:t.value.forceOcr,"onUpdate:modelValue":l[0]||(l[0]=i=>t.value.forceOcr=i),"active-text":"开启","inactive-text":"关闭",disabled:t.value.backend!=="pipeline"},null,8,["modelValue","disabled"]),t.value.backend!=="pipeline"?(V(),p("div",M," 只有在Pipeline模式下可以设置强制OCR ")):O("",!0)]),_:1}),e(a,{label:"OCR识别语言"},{default:n(()=>[e(g,{modelValue:t.value.ocrLanguage,"onUpdate:modelValue":l[1]||(l[1]=i=>t.value.ocrLanguage=i),class:"settings-select"},{default:n(()=>[e(o,{label:"中英日繁混合(ch)",value:"ch"}),e(o,{label:"中英日繁混合+手写场景(ch_server)",value:"ch_server"}),e(o,{label:"中英日繁混合+手写场景(ch_lite)",value:"ch_lite"}),e(o,{label:"英语(en)",value:"en"}),e(o,{label:"韩语(korean)",value:"korean"}),e(o,{label:"日语(japan)",value:"japan"}),e(o,{label:"繁体中文(chinese_cht)",value:"chinese_cht"}),e(o,{label:"泰米尔语(ta)",value:"ta"}),e(o,{label:"泰卢固语(te)",value:"te"}),e(o,{label:"格鲁吉亚语(ka)",value:"ka"}),e(o,{label:"拉丁语(latin)",value:"latin"}),e(o,{label:"阿拉伯语(arabic)",value:"arabic"}),e(o,{label:"东斯拉夫语(east_slavic)",value:"east_slavic"}),e(o,{label:"西里尔语(cyrillic)",value:"cyrillic"}),e(o,{label:"天城文(devanagari)",value:"devanagari"})]),_:1},8,["modelValue"])]),_:1}),e(a,{label:"公式识别"},{default:n(()=>[e(s,{modelValue:t.value.formulaRecognition,"onUpdate:modelValue":l[2]||(l[2]=i=>t.value.formulaRecognition=i),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1}),e(a,{label:"表格识别"},{default:n(()=>[e(s,{modelValue:t.value.tableRecognition,"onUpdate:modelValue":l[3]||(l[3]=i=>t.value.tableRecognition=i),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1}),e(a,{label:"后端引擎"},{default:n(()=>[e(g,{modelValue:t.value.backend,"onUpdate:modelValue":l[4]||(l[4]=i=>t.value.backend=i),class:"settings-select"},{default:n(()=>[e(o,{label:"Pipeline",value:"pipeline"}),e(o,{label:"VLM Transformers",value:"vlm-transformers"}),e(o,{label:"VLM SgLang Engine",value:"vlm-sglang-engine"}),e(o,{label:"VLM SgLang Client",value:"vlm-sglang-client"})]),_:1},8,["modelValue"])]),_:1}),e(a,null,{default:n(()=>[e(m,{type:"primary",onClick:x,size:"large"},{default:n(()=>l[5]||(l[5]=[f("保存设置")])),_:1,__:[5]}),e(m,{onClick:R,size:"large"},{default:n(()=>l[6]||(l[6]=[f("重置")])),_:1,__:[6]})]),_:1})]),_:1},8,["model"])])])}}}),z=S(E,[["__scopeId","data-v-2a9c86ec"]]);export{z as default};

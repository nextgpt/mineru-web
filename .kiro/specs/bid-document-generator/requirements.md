# 需求文档

## 介绍

基于现有的mineru-web文档解析系统，开发一个智能招标文件生成标书的系统。该系统将利用大模型技术，从用户上传的招标文件中提取关键信息，理解需求，并自动生成完整的技术/服务方案标书。系统需要集成外部的文档解析服务和大模型API，提供完整的前后端解决方案。

## 需求

### 需求 1

**用户故事：** 作为招标参与者，我希望能够上传招标文件并管理我的项目，以便系统能够为我生成相应的标书。

#### 验收标准

1. 当用户访问系统时，系统应当显示包含"项目"菜单的左侧导航栏
2. 当用户点击"项目"菜单时，系统应当显示项目管理页面
3. 当用户在项目管理页面时，系统应当提供上传招标文件的功能
4. 当用户上传文件时，系统应当验证文件格式并存储文件信息
5. 当文件上传成功时，系统应当创建新的项目记录并显示项目列表

### 需求 2

**用户故事：** 作为系统，我需要调用外部文档解析服务来解析招标文件内容，以便后续的AI分析处理。

#### 验收标准

1. 当用户上传招标文件后，系统应当调用MinerU文档解析API (http://192.168.30.54:8088/api/v1/documents/parse)
2. 当文档解析完成时，系统应当获取并存储解析后的文本内容
3. 如果文档解析失败，系统应当记录错误信息并通知用户
4. 当解析成功时，系统应当更新项目状态为"已解析"

### 需求 3

**用户故事：** 作为系统，我需要通过大模型分析招标文件内容，提取需求理解概况，以便为标书生成提供基础信息。

#### 验收标准

1. 当文档解析完成后，系统应当调用大模型API (http://192.168.30.54:3000/v1) 分析招标公告和服务需求内容
2. 当分析招标内容时，系统应当提取项目概览和详细需求信息
3. 当分析甲方信息时，系统应当识别甲方单位及预算信息
4. 当所有分析完成时，系统应当整合甲方信息、项目概览信息、项目详细信息生成需求概况
5. 系统应当将提取的信息结构化存储到数据库中

### 需求 4

**用户故事：** 作为系统，我需要通过大模型理解详细需求并进行需求分级，以便为标书撰写提供重点指导。

#### 验收标准

1. 当需求概况分析完成后，系统应当通过行业理解和项目需求分析对需求进行分类
2. 当进行需求分类时，系统应当根据甲方需求的关注程度将需求分为：关键需求、重要需求、一般需求
3. 当需求分级完成时，系统应当为每个需求类别提供详细说明
4. 系统应当将分级后的需求信息存储并关联到对应项目

### 需求 5

**用户故事：** 作为用户，我希望系统能够生成技术/服务方案大纲，以便我了解标书的整体结构。

#### 验收标准

1. 当需求分析完成后，系统应当生成技术/服务方案大纲
2. 当生成大纲时，系统应当使用标准格式：一级标题序号1、2、3等，二级标题序号1.1、1.2、1.3等，三级标题序号1.1.1、1.1.2、1.1.3等
3. 当大纲生成完成时，系统应当在前端展示结构化的大纲内容
4. 用户应当能够查看和编辑生成的大纲结构

### 需求 6

**用户故事：** 作为用户，我希望系统能够基于分析结果和大纲自动生成完整的标书内容，以便我获得可用的标书文档。

#### 验收标准

1. 当用户确认大纲后，系统应当调用大模型API完成全文撰写
2. 当生成标书内容时，系统应当基于需求分析结果、大纲结构和甲方要求进行撰写
3. 当标书生成完成时，系统应当提供预览和下载功能
4. 用户应当能够对生成的标书内容进行编辑和修改
5. 系统应当支持将最终标书导出为常见格式（如PDF、Word）

### 需求 7

**用户故事：** 作为系统管理员，我需要系统能够正确连接和使用外部服务，以便系统功能正常运行。

#### 验收标准

1. 系统应当能够连接到MinIO存储服务 (端口19000) 用于文件存储
2. 系统应当能够连接到Redis服务 (端口16379) 用于缓存和会话管理
3. 系统应当能够连接到PostgreSQL数据库 (端口15432) 用于数据持久化
4. 当调用外部API时，系统应当正确处理网络异常和API错误
5. 系统应当提供健康检查接口以监控各服务连接状态

### 需求 8

**用户故事：** 作为用户，我希望能够管理我的项目和生成的标书，以便我能够跟踪项目进度和历史记录。

#### 验收标准

1. 当用户访问项目列表时，系统应当显示所有项目及其状态（上传中、解析中、分析中、已完成等）
2. 当用户点击项目时，系统应当显示项目详情，包括原始文件、分析结果、生成的标书等
3. 用户应当能够删除不需要的项目和相关文件
4. 系统应当提供项目搜索和筛选功能
5. 当项目状态发生变化时，系统应当实时更新前端显示
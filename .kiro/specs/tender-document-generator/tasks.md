# 招标文件智能生成标书系统实施计划

## 任务列表

- [x] 1. 项目基础设施和配置
  - 创建RAGFLOW API服务配置和基础HTTP客户端
  - 创建DeepSeek API服务配置和基础HTTP客户端
  - 设置项目环境变量和配置文件
  - 创建TypeScript类型定义文件
  - _需求: 需求1, 需求3, 需求4_

- [x] 2. 数据模型和状态管理
  - [x] 2.1 创建项目数据模型和接口定义
    - 定义TenderProject、GenerationSettings等核心数据模型
    - 创建RAGFLOW API响应类型定义
    - 创建DeepSeek API请求响应类型定义
    - _需求: 需求1, 需求1.1, 需求2_

  - [x] 2.2 实现Pinia状态管理store
    - 创建项目管理store (projectStore)
    - 创建大纲生成store (outlineStore)
    - 创建内容编辑store (editorStore)
    - 实现本地存储持久化
    - _需求: 需求1.1, 需求3, 需求5_

- [x] 3. RAGFLOW API服务集成
  - [x] 3.1 实现RAGFLOW基础API服务类
    - 创建RAGFlowService类和基础HTTP配置
    - 实现createDataset方法（使用book切片方式）
    - 实现uploadDocument方法（multipart/form-data上传）
    - 实现parseDocument方法
    - 添加错误处理和重试机制
    - _需求: 需求1_

  - [x] 3.2 实现RAGFLOW检索服务
    - 实现retrieveContent方法用于知识库检索
    - 实现五阶段提示词的检索逻辑
    - 添加检索结果缓存机制
    - 创建检索进度跟踪功能
    - _需求: 需求3_

- [ ] 4. DeepSeek API服务集成
  - [ ] 4.1 实现DeepSeek基础API服务类
    - 创建DeepSeekService类和HTTP配置
    - 实现基础的聊天完成API调用
    - 添加token计数和分段处理逻辑
    - 实现流式响应处理
    - _需求: 需求4_

  - [ ] 4.2 实现标书内容生成逻辑
    - 实现大纲分段算法（4096 token限制）
    - 实现分段内容生成和合并
    - 添加生成进度跟踪
    - 实现生成内容的格式化处理
    - _需求: 需求4_

- [x] 5. 导航和路由系统
  - [x] 5.1 更新路由配置
    - 修改现有路由，添加"首页"和"项目"导航
    - 更新App.vue中的导航栏组件
    - 实现路由守卫和权限控制
    - _需求: 需求0_

  - [x] 5.2 创建导航组件
    - 重构侧边栏导航，支持"首页"和"项目"两个主入口
    - 实现导航状态管理和高亮显示
    - 添加响应式设计支持
    - _需求: 需求0_

- [x] 6. 首页组件实现
  - 创建Home.vue组件，显示系统介绍
  - 实现欢迎信息和功能特性展示
  - 添加"文件上传"快速入口按钮
  - 实现上传成功后的页面跳转逻辑
  - _需求: 需求0, 需求1_

- [x] 7. 项目管理功能
  - [x] 7.1 创建项目列表组件
    - 创建ProjectManager.vue组件
    - 实现项目数据的获取和显示
    - 添加搜索和筛选功能
    - 实现分页功能
    - _需求: 需求1.1_

  - [x] 7.2 实现卡片和列表视图切换
    - 创建ProjectCard.vue组件（正方形卡片，每行5个）
    - 创建ProjectList.vue组件（表格形式）
    - 实现视图模式切换功能
    - 添加项目状态显示和操作按钮
    - _需求: 需求1.1_

- [ ] 8. 文档上传功能
  - [x] 8.1 重构现有上传组件
    - 修改Upload.vue组件，集成RAGFLOW API
    - 实现文件上传到RAGFLOW数据集
    - 添加上传进度显示和状态跟踪
    - 实现上传成功后的自动跳转
    - _需求: 需求1_

  - [x] 8.2 实现文档解析流程
    - 添加文档解析状态监控
    - 实现解析完成后的通知机制
    - 添加解析失败的错误处理
    - 创建解析进度显示组件
    - _需求: 需求1_

- [x] 9. 文档预览功能
  - [x] 9.1 重构文档预览组件
    - 修改FilePreview.vue组件，适配新的布局需求
    - 实现左侧固定原文预览
    - 重构右侧内容区域，支持多种状态切换
    - 添加预览内容的缓存机制
    - _需求: 需求2_

  - [x] 9.2 实现标书设置界面
    - 创建TenderSettings.vue组件
    - 实现篇幅选择（短篇、中篇、长篇）
    - 实现写作质量选择（专家写作、标准写作）
    - 添加"开始生成大纲"按钮和状态管理
    - _需求: 需求2_

- [ ] 10. 大纲生成功能
  - [ ] 10.1 创建大纲生成组件
    - 创建OutlineGenerator.vue组件
    - 实现五阶段生成流程的UI展示
    - 添加每个阶段的进度指示器
    - 实现阶段结果的实时显示
    - _需求: 需求3_

  - [ ] 10.2 实现五阶段生成逻辑
    - 实现阶段一：项目需求概况生成
    - 实现阶段二：需求重要性分析
    - 实现阶段三：评分项内容分析
    - 实现阶段四：评分策略分析
    - 实现阶段五：最终大纲整合
    - 添加每个阶段的错误处理和重试机制
    - _需求: 需求3_

- [ ] 11. 标书内容生成功能
  - [ ] 11.1 创建内容生成组件
    - 创建ProposalGenerator.vue组件
    - 实现基于大纲的内容生成UI
    - 添加生成进度显示和取消功能
    - 实现生成内容的实时预览
    - _需求: 需求4_

  - [ ] 11.2 实现分段生成逻辑
    - 实现大纲内容的智能分段算法
    - 实现分段内容的并发生成
    - 添加生成内容的质量检查
    - 实现生成结果的格式化和合并
    - _需求: 需求4_

- [ ] 12. 内容编辑功能
  - [ ] 12.1 创建富文本编辑器
    - 创建ContentEditor.vue组件
    - 集成富文本编辑器（如Quill或TinyMCE）
    - 实现编辑内容的实时保存
    - 添加编辑历史和撤销重做功能
    - _需求: 需求5_

  - [ ] 12.2 实现保存和同步功能
    - 实现编辑内容的本地存储
    - 添加自动保存功能（防抖处理）
    - 实现保存状态的视觉反馈
    - 添加保存失败的错误处理
    - _需求: 需求5_

- [ ] 13. 文档下载功能
  - [ ] 13.1 实现Word文档生成
    - 集成docx库用于Word文档生成
    - 实现标书内容到Word格式的转换
    - 保持原有格式和样式
    - 添加文档模板和样式配置
    - _需求: 需求6_

  - [ ] 13.2 实现下载功能
    - 创建文档下载服务
    - 实现文件下载的进度显示
    - 添加下载失败的错误处理
    - 实现下载历史记录功能
    - _需求: 需求6_

- [ ] 14. 错误处理和用户体验优化
  - [ ] 14.1 实现全局错误处理
    - 创建全局错误处理器
    - 实现API错误的统一处理
    - 添加网络错误的重试机制
    - 创建用户友好的错误提示
    - _需求: 需求1, 需求3, 需求4_

  - [ ] 14.2 添加加载状态和进度指示
    - 实现全局加载状态管理
    - 添加各个操作的进度指示器
    - 创建骨架屏加载效果
    - 实现操作取消功能
    - _需求: 需求1, 需求3, 需求4_

- [ ] 15. 性能优化和测试
  - [ ] 15.1 实现性能优化
    - 添加组件懒加载
    - 实现虚拟滚动（项目列表）
    - 添加请求缓存和防抖处理
    - 优化大文件上传和处理
    - _需求: 需求1.1, 需求3, 需求4_

  - [ ] 15.2 编写单元测试和集成测试
    - 为核心组件编写单元测试
    - 创建API服务的集成测试
    - 实现端到端流程测试
    - 添加性能测试和监控
    - _需求: 需求1, 需求3, 需求4, 需求5, 需求6_

- [ ] 16. 最终集成和部署准备
  - 整合所有功能模块
  - 进行全面的功能测试
  - 优化构建配置和打包
  - 创建部署文档和用户手册
  - _需求: 需求0, 需求1, 需求1.1, 需求2, 需求3, 需求4, 需求5, 需求6_
# 招标文件智能生成标书系统需求文档

## 介绍

本系统是基于现有mineru-web前端的招标文件智能生成标书功能。用户可以上传招标文件，系统通过RAGFLOW服务器进行文档解析和知识库检索，结合deepseek-32B大模型生成专业的标书内容。系统提供完整的标书生成流程，包括导航界面、文档上传、项目管理、参数设置、大纲生成、标书生成、内容编辑和文档下载功能。

## 需求

### 需求 0: 导航界面和页面布局

**用户故事:** 作为投标用户，我想要有清晰的导航界面来访问不同功能模块，以便高效地管理招标项目和生成标书。

#### 验收标准

1. WHEN 用户访问系统 THEN 系统 SHALL 显示包含"首页"和"项目"的导航栏
2. WHEN 用户点击"首页" THEN 系统 SHALL 显示欢迎信息和系统介绍
3. WHEN 用户在首页 THEN 系统 SHALL 提供"文件上传"按钮
4. WHEN 用户点击"项目" THEN 系统 SHALL 显示用户上传的招标文件列表
5. WHEN 用户查看项目页面 THEN 系统 SHALL 提供卡片和列表两种展示模式切换选项

### 需求 1: 招标文件上传功能

**用户故事:** 作为投标用户，我想要上传招标文件到系统，以便系统能够解析招标文档内容并为后续标书生成提供基础数据。

#### 验收标准

1. WHEN 用户在首页点击"文件上传"按钮 THEN 系统 SHALL 显示文件上传界面
2. WHEN 用户选择招标文件进行上传 THEN 系统 SHALL 调用RAGFLOW API上传文件到知识库
3. WHEN 文件上传成功 THEN 系统 SHALL 自动跳转到文档预览页面
4. WHEN 文件上传到RAGFLOW THEN 系统 SHALL 使用book切片方式解析文档
5. IF 上传失败 THEN 系统 SHALL 显示错误信息并允许重新上传

### 需求 1.1: 项目文件管理功能

**用户故事:** 作为投标用户，我想要查看和管理已上传的招标文件，以便快速访问不同的投标项目。

#### 验收标准

1. WHEN 用户访问项目页面 THEN 系统 SHALL 显示已上传的招标文件列表
2. WHEN 用户选择卡片模式 THEN 系统 SHALL 以正方形卡片形式展示文件，每行显示5个卡片
3. WHEN 用户选择列表模式 THEN 系统 SHALL 以表格形式展示文件信息
4. WHEN 用户点击任意文件 THEN 系统 SHALL 跳转到该文件的预览页面
5. WHEN 系统显示文件卡片 THEN 系统 SHALL 包含文件名、上传时间、处理状态等信息

### 需求 2: 文档预览和标书设置功能

**用户故事:** 作为投标用户，我想要在预览招标文档的同时设置标书生成参数，以便根据项目需求定制标书的篇幅和质量。

#### 验收标准

1. WHEN 用户进入文档预览页面 THEN 系统 SHALL 在左侧固定显示原文内容预览
2. WHEN 用户查看预览页面 THEN 系统 SHALL 在右侧显示标书设置选项
3. WHEN 用户设置篇幅选择 THEN 系统 SHALL 提供短篇、中篇、长篇三个选项
4. WHEN 用户设置写作质量 THEN 系统 SHALL 提供专家写作、标准写作两个选项
5. WHEN 用户完成设置 THEN 系统 SHALL 启用"开始生成大纲"按钮
6. WHEN 系统开始处理 THEN 右侧 SHALL 根据不同处理状态显示相应内容（设置界面、生成进度、大纲内容、标书内容）

### 需求 3: 智能大纲生成功能

**用户故事:** 作为投标用户，我想要系统根据招标文档智能生成技术/服务方案大纲，以便为标书撰写提供结构化的指导框架。

#### 验收标准

1. WHEN 用户点击"开始生成大纲"按钮 THEN 系统 SHALL 开始五阶段大纲生成流程
2. WHEN 系统执行阶段一 THEN 系统 SHALL 使用提示词"请深入理解项目的技术/服务需求并总结成概况概要，不超过300字"调用RAGFLOW检索接口
3. WHEN 系统执行阶段二 THEN 系统 SHALL 使用提示词"请通过行业理解和项目的技术/服务需求分析，根据甲方需求的关注程度将技术/服务需求分为：关键需求、重要需求、一般需求。特别注意请忽略商务需求内容"调用RAGFLOW检索接口
4. WHEN 系统执行阶段三 THEN 系统 SHALL 使用提示词"逐行分析和锁定具体的评分项内容，分点输出得分点、得分分数，内容要求（内容要求必须原文输出，不能伪造数字或要求"调用RAGFLOW检索接口
5. WHEN 系统执行阶段四 THEN 系统 SHALL 使用提示词"输出客观评分项、主观评分项、主观评分项整体应答策略逻辑、技术方案重点应答评分项及原因"调用RAGFLOW检索接口
6. WHEN 系统执行阶段五 THEN 系统 SHALL 使用提示词"根据前四个阶段的内容整合输出技术/服务方案大纲"调用RAGFLOW检索接口
7. WHEN 每个阶段完成 THEN 系统 SHALL 在右侧预览窗口实时展示该阶段的生成结果
8. WHEN 所有阶段完成 THEN 系统 SHALL 在右侧显示完整的技术/服务方案大纲
9. WHEN 生成过程中 THEN 左侧原文预览 SHALL 保持固定显示

### 需求 4: 标书内容生成功能

**用户故事:** 作为投标用户，我想要系统根据生成的大纲自动生成详细的标书内容，以便获得专业完整的投标文档。

#### 验收标准

1. WHEN 大纲生成完成 THEN 系统 SHALL 自动开始标书内容生成流程
2. WHEN 系统生成标书内容 THEN 系统 SHALL 使用deepseek-32B模型进行内容生成
3. WHEN 系统调用大模型 THEN 系统 SHALL 将大纲分段发送，每段不超过4096个token
4. WHEN 标书内容生成 THEN 系统 SHALL 在右侧预览窗口实时展示生成的内容
5. WHEN 内容生成完成 THEN 系统 SHALL 提供完整的标书文档预览

### 需求 5: 标书内容编辑功能

**用户故事:** 作为投标用户，我想要能够编辑生成的标书内容，以便根据具体需求进行个性化调整和完善。

#### 验收标准

1. WHEN 用户查看生成的标书内容 THEN 系统 SHALL 在右侧提供可编辑的文本编辑器
2. WHEN 用户修改标书内容 THEN 系统 SHALL 实时保存编辑状态
3. WHEN 用户编辑内容时 THEN 系统 SHALL 在右侧底部提供"保存"和"下载"按钮
4. WHEN 用户点击保存 THEN 系统 SHALL 将编辑后的内容保存到服务器
5. IF 保存成功 THEN 系统 SHALL 显示保存成功提示
6. WHEN 用户编辑过程中 THEN 左侧原文预览 SHALL 保持固定显示

### 需求 6: 标书文档下载功能

**用户故事:** 作为投标用户，我想要将编辑完成的标书内容下载为Word文档，以便用于正式的投标提交。

#### 验收标准

1. WHEN 用户查看标书内容 THEN 系统 SHALL 提供"下载"按钮
2. WHEN 用户点击下载按钮 THEN 系统 SHALL 将标书内容转换为docx格式
3. WHEN 系统生成Word文档 THEN 系统 SHALL 保持原有的格式和结构
4. WHEN 文档生成完成 THEN 系统 SHALL 自动触发文件下载
5. IF 下载失败 THEN 系统 SHALL 显示错误信息并允许重新下载